<!DOCTYPE html>
<html>
<head>
  <title>JMockit Coverage Report - XmlDocument.java</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../../../../../coverage.css'/>
  <script type='text/javascript' src='../../../../../coverage.js'></script>
  <script type='text/javascript' src='../../../../../prettify.js'></script>
</head>
<body onload='prettyPrint()'>
  <table cellpadding='0' cellspacing='1'>
    <caption>Document/src/main/java/jp/co/dk/document/xml/XmlDocument.java</caption>
    <tr>
      <td class='line'>1</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>package jp.co.dk.document.xml;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td><pre class='imports prettyprint' onclick='showHideLines(this)'><div>import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.PrintWriter;
import java.net.MalformedURLException;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.xml.sax.SAXException;

import jp.co.dk.document.Document;
import jp.co.dk.document.ElementName;
import jp.co.dk.document.File;
import jp.co.dk.document.ElementSelector;
import jp.co.dk.document.xml.exception.XmlDocumentException;
import jp.co.dk.document.exception.DocumentException;
import jp.co.dk.document.message.DocumentMessage;
</div><span>import ...</span></pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>/**
 * Documentは、XMLドキュメントのドキュメントルートを表すクラスです。&lt;br>
 * 
 * XMLドキュメント操作を行うことができます。
 * 
 * @version 1.0
 * @author D.Kanno
 * 
 */</div><span>/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>34</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>public class XmlDocument extends File implements Document {</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>36</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	private org.w3c.dom.Document <span class='instance covered' title='Reads: 1 Writes: 1'>document</span>;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>38</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	private jp.co.dk.document.xml.XmlElement <span class='instance covered' title='Reads: 1 Writes: 1'>xmlElement</span>;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;br/>
	 * 
	 * 読み込みストリームを元にオブジェクトを生成する。
	 * 
	 * @param inputStream  読み込みストリーム
	 * @throws DocumentException 
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>48</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public XmlDocument(InputStream inputStream) throws DocumentException{</pre></td>
    </tr>
    <tr>
      <td class='line'>49</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l49s0'>		super(inputStream);</pre></td>
    </tr>
    <tr>
      <td class='line'>50</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l50s0'>		this.document   = this.createDocument(super.fileData.getStream());</pre></td>
    </tr>
    <tr>
      <td class='line'>51</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l51s0'>		this.xmlElement = new jp.co.dk.document.xml.XmlElement(this.document.getDocumentElement());</pre></td>
    </tr>
    <tr>
      <td class='line'>52</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l52s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>54</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>55</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;jp.co.dk.document.Element> getElement() {</pre></td>
    </tr>
    <tr>
      <td class='line'>56</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l56s0'>		return this.xmlElement.getElement();</pre></td>
    </tr>
    <tr>
      <td class='line'>57</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>59</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>60</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;jp.co.dk.document.Element> getElement(ElementName elementName) {</pre></td>
    </tr>
    <tr>
      <td class='line'>61</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l61s0'>		return this.xmlElement.getElement(elementName);</pre></td>
    </tr>
    <tr>
      <td class='line'>62</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>64</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>65</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;jp.co.dk.document.Element> getElement(ElementSelector elementSelector) {</pre></td>
    </tr>
    <tr>
      <td class='line'>66</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l66s0'>		return this.xmlElement.getElement(elementSelector);</pre></td>
    </tr>
    <tr>
      <td class='line'>67</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>69</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>70</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;jp.co.dk.document.Element> getChildElement() {</pre></td>
    </tr>
    <tr>
      <td class='line'>71</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l71s0'>		return this.xmlElement.getChildElement();</pre></td>
    </tr>
    <tr>
      <td class='line'>72</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>74</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>75</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;jp.co.dk.document.Element> getChildElement(ElementName elementName) {</pre></td>
    </tr>
    <tr>
      <td class='line'>76</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l76s0'>		return this.xmlElement.getChildElement(elementName);</pre></td>
    </tr>
    <tr>
      <td class='line'>77</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>79</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>80</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;jp.co.dk.document.Element> getChildElement(ElementSelector elementSelector) {</pre></td>
    </tr>
    <tr>
      <td class='line'>81</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l81s0'>		return this.xmlElement.getChildElement(elementSelector);</pre></td>
    </tr>
    <tr>
      <td class='line'>82</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>84</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>85</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public boolean hasChildElement() {</pre></td>
    </tr>
    <tr>
      <td class='line'>86</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l86s0'>		return this.xmlElement.hasChildElement();</pre></td>
    </tr>
    <tr>
      <td class='line'>87</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>89</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>90</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public boolean isElement(jp.co.dk.document.ElementName elementName) {</pre></td>
    </tr>
    <tr>
      <td class='line'>91</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l91s0'>		return this.xmlElement.isElement(elementName);</pre></td>
    </tr>
    <tr>
      <td class='line'>92</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>94</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>95</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public boolean hasElement(jp.co.dk.document.ElementName elementName) {</pre></td>
    </tr>
    <tr>
      <td class='line'>96</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l96s0'>		return this.xmlElement.hasElement(elementName);</pre></td>
    </tr>
    <tr>
      <td class='line'>97</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>99</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>100</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String getAttribute(String name) {</pre></td>
    </tr>
    <tr>
      <td class='line'>101</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l101s0'>		return this.xmlElement.getAttribute(name);</pre></td>
    </tr>
    <tr>
      <td class='line'>102</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>104</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>105</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public boolean hasAttribute(String attributeName) {</pre></td>
    </tr>
    <tr>
      <td class='line'>106</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l106s0'>		return this.xmlElement.hasAttribute(attributeName);</pre></td>
    </tr>
    <tr>
      <td class='line'>107</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>109</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>110</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String getTagName() {</pre></td>
    </tr>
    <tr>
      <td class='line'>111</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l111s0'>		return this.xmlElement.getTagName();</pre></td>
    </tr>
    <tr>
      <td class='line'>112</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>114</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>115</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String getContent() {</pre></td>
    </tr>
    <tr>
      <td class='line'>116</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l116s0'>		return this.xmlElement.getContent();</pre></td>
    </tr>
    <tr>
      <td class='line'>117</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>119</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>120</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public java.io.File save (java.io.File dir, String filename ) throws DocumentException {</pre></td>
    </tr>
    <tr>
      <td></td><td class='count'>0</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#ff0000' onclick='hidePath()'>Path coverage: 0/4</span>
        <span class='uncovered' onclick="showPath(this,'l121s0 l121s1')">A: 0</span>
        <span class='uncovered' onclick="showPath(this,'l121s0 l122s0 l122s1')">B: 0</span>
        <span class='uncovered' onclick="showPath(this,'l121s0 l122s0 l124s0 l125s0 l125s1')">C: 0</span>
        <span class='uncovered' onclick="showPath(this,'l121s0 l122s0 l124s0 l125s0 l128s0 l136s0')">D: 0</span>
      </td>
    </tr>
    <tr>
      <td class='line'>121</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l121s0' title='Executions: 0' class='uncovered'>if (!dir.exists()) throw new DocumentException(DocumentMessage.ERROR_DOWNLOAD_DIR_IS_NOT_FOUND, dir.getAbsolutePath());</span></pre></td>
    </tr>
    <tr>
      <td class='line'>122</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l122s0' title='Executions: 0' class='uncovered'>if (!dir.isDirectory()) throw new DocumentException(DocumentMessage.ERROR_SPECIFIED_PATH_IS_NOT_DIRECTORY, dir.getAbsolutePath());</span></pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>124</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l124s0'>		java.io.File path = new java.io.File(new StringBuilder(dir.getAbsolutePath()).append('/').append(filename).toString());</pre></td>
    </tr>
    <tr>
      <td class='line'>125</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l125s0' title='Executions: 0' class='uncovered'>if (path.exists()) throw new DocumentException(DocumentMessage.ERROR_FILE_APLREADY_EXISTS_IN_THE_SPECIFIED_PATH, dir.getAbsolutePath());</span></pre></td>
    </tr>
    <tr>
      <td class='line'>126</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>128</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l128s0'>			PrintWriter pw = new PrintWriter(new BufferedWriter(new FileWriter(path)));</pre></td>
    </tr>
    <tr>
      <td class='line'>129</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l129s0'>			pw.print(this.xmlElement.toString());</pre></td>
    </tr>
    <tr>
      <td class='line'>130</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l130s0'>			pw.close();</pre></td>
    </tr>
    <tr>
      <td class='line'>131</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l131s0'>		} catch (MalformedURLException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>132</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l132s0'>			throw new DocumentException(DocumentMessage.ERROR_FAILED_TO_SAVE_FILE, path.getPath(), e);</pre></td>
    </tr>
    <tr>
      <td class='line'>133</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l133s0'>		} catch (IOException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>134</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l134s0'>			throw new DocumentException(DocumentMessage.ERROR_FAILED_TO_SAVE_FILE, path.getPath(), e);</pre></td>
    </tr>
    <tr>
      <td class='line'>135</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>136</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l136s0'>		return path;</pre></td>
    </tr>
    <tr>
      <td class='line'>137</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * XMLドキュメントのインスタンス作成&lt;p>
	 * 指定の読み込みストリームを元にXMLドキュメントのインスタンスを生成します。
	 * 
	 * @param inputStream 読み込みストリーム
	 * @return XMLドキュメントインスタンス
	 * @throws XmlDocumentException インスタンス生成に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>147</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	private org.w3c.dom.Document createDocument(InputStream inputStream) throws XmlDocumentException{</pre></td>
    </tr>
    <tr>
      <td class='line'>148</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l148s0'>		DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();</pre></td>
    </tr>
    <tr>
      <td class='line'>149</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		DocumentBuilder builder ;</pre></td>
    </tr>
    <tr>
      <td class='line'>150</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>151</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l151s0'>			builder = factory.newDocumentBuilder();</pre></td>
    </tr>
    <tr>
      <td class='line'>152</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l152s0'>		} catch (ParserConfigurationException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>153</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l153s0'>			throw new XmlDocumentException(DocumentMessage.FAILED_TO_GENERATE_THE_XML_INSTANCE, e);</pre></td>
    </tr>
    <tr>
      <td class='line'>154</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>155</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>156</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l156s0'>			return builder.parse(inputStream);</pre></td>
    </tr>
    <tr>
      <td class='line'>157</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l157s0'>		} catch (SAXException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>158</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l158s0'>			throw new XmlDocumentException(DocumentMessage.SAX_WARNING_OR_ERROR, e);</pre></td>
    </tr>
    <tr>
      <td class='line'>159</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l159s0'>		} catch (IOException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>160</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l160s0'>			throw new XmlDocumentException(DocumentMessage.FILE_INPUT_OUTPUT_ERROR, e);</pre></td>
    </tr>
    <tr>
      <td class='line'>161</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>162</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr>
      <td class='line'>163</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>}</pre></td>
    </tr>
  </table>
</body>
</html>
