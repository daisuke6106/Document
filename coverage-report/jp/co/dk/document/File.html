<!DOCTYPE html>
<html>
<head>
  <title>JMockit Coverage Report - File.java</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../../../../coverage.css'/>
  <script type='text/javascript' src='../../../../coverage.js'></script>
  <script type='text/javascript' src='../../../../prettify.js'></script>
</head>
<body onload='prettyPrint()'>
  <table cellpadding='0' cellspacing='1'>
    <caption>Document/src/main/java/jp/co/dk/document/File.java</caption>
    <tr>
      <td class='line'>1</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>package jp.co.dk.document;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td><pre class='imports prettyprint' onclick='showHideLines(this)'><div>import java.io.FileOutputStream;	
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import jp.co.dk.document.exception.DocumentException;
import jp.co.dk.document.message.DocumentMessage;
import jp.co.dk.logger.Logger;
import jp.co.dk.logger.LoggerFactory;
</div><span>import ...</span></pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>/**
 * Fileは、ネットワーク上に存在するファイルを表すファイルオブジェクトです。
 * 
 * @version 1.0
 * @author D.Kanno
 */</div><span>/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>19</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>public class File {</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>21</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected ByteDump <span class='instance uncovered' title='Reads: 4 Writes: 75'>fileData</span>;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>23</td><td>&nbsp;</td>
      <td><pre class='comment'>	/** ロガーインスタンス */</pre></td>
    </tr>
    <tr>
      <td class='line'>24</td><td class='count'>76</td>
      <td><pre class='prettyprint covered' id='l24s0'>	protected Logger <span class='instance covered' title='Reads: 80 Writes: 76'>logger</span> = LoggerFactory.getLogger(this.getClass());</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;br/>
	 * 
	 * 読み込みストリームを元にオブジェクトを生成する。
	 * 
	 * @param inputStream 読み込みストリーム
	 * @throws DocumentException 読み込みストリームからの読み込みに失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>34</td><td class='count'>76</td>
      <td><pre class='prettyprint covered' id='l34s0'>	public File(InputStream inputStream) throws DocumentException {</pre></td>
    </tr>
    <tr>
      <td class='line'>35</td><td class='count'>76</td>
      <td><pre class='prettyprint covered' id='l35s0'>		this.logger.constractor(this.getClass(), inputStream);</pre></td>
    </tr>
    <tr>
      <td class='line'>36</td><td class='count'>76</td>
      <td><pre class='prettyprint covered' id='l36s0'>		this.fileData = new ByteDump(inputStream);</pre></td>
    </tr>
    <tr>
      <td class='line'>37</td><td class='count'>75</td>
      <td><pre class='prettyprint covered' id='l37s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このオブジェクトが表すファイルを指定のディレクトリへ指定のファイル名にて保存する。&lt;p>
	 * 保存が成功した場合、保存したファイルのファイルオブジェクトを返却する。
	 * &lt;br/>
	 * 以下の条件の場合、例外を発生する。&lt;br/>
	 * ・指定された保存先ディレクトリが存在しない場合&lt;br/>
	 * ・指定された保存先ディレクトリがディレクトリが存在しない場合&lt;br/>
	 * ・保存先のファイルがすでに存在する場合&lt;br/>
	 * 
	 * @param dir 保存先ディレクトリ
	 * @param filename ファイル名
	 * @return 保存したファイルオブジェクト
	 * @throws DocumentException 保存に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>53</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public java.io.File save (java.io.File dir, String filename ) throws DocumentException {</pre></td>
    </tr>
    <tr>
      <td></td><td class='count'>8</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#33cc00' onclick='hidePath()'>Path coverage: 4/5</span>
        <span class='covered' onclick="showPath(this,'l54s0 l54s1')">A: 1</span>
        <span class='covered' onclick="showPath(this,'l54s0 l55s0 l55s1')">B: 1</span>
        <span class='covered' onclick="showPath(this,'l54s0 l55s0 l57s0 l58s0 l58s1')">C: 2</span>
        <span class='uncovered' onclick="showPath(this,'l54s0 l55s0 l57s0 l58s0 l60s0 l64s0 l67s0')">D: 0</span>
        <span class='covered' onclick="showPath(this,'l54s0 l55s0 l57s0 l58s0 l60s0 l64s0 l64s1 l67s0')">E: 4</span>
      </td>
    </tr>
    <tr>
      <td class='line'>54</td><td class='count'>8</td>
      <td><pre class='prettyprint jmp'>		<span id='l54s0' title='Executions: 8' class='covered'>if (!dir.exists()) throw new DocumentException(DocumentMessage.ERROR_DOWNLOAD_DIR_IS_NOT_FOUND, dir.getAbsolutePath());</span></pre></td>
    </tr>
    <tr>
      <td class='line'>55</td><td class='count'>7</td>
      <td><pre class='prettyprint jmp'>		<span id='l55s0' title='Executions: 7' class='covered'>if (!dir.isDirectory()) throw new DocumentException(DocumentMessage.ERROR_SPECIFIED_PATH_IS_NOT_DIRECTORY, dir.getAbsolutePath());</span></pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>57</td><td class='count'>6</td>
      <td><pre class='prettyprint covered' id='l57s0'>		java.io.File path = new java.io.File(new StringBuilder(dir.getAbsolutePath()).append('/').append(filename).toString());</pre></td>
    </tr>
    <tr>
      <td class='line'>58</td><td class='count'>6</td>
      <td><pre class='prettyprint jmp'>		<span id='l58s0' title='Executions: 6' class='covered'>if (path.exists()) throw new DocumentException(DocumentMessage.ERROR_FILE_APLREADY_EXISTS_IN_THE_SPECIFIED_PATH, path.getAbsolutePath());</span></pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>60</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l60s0'>		this.logger.info("save path=[" + path.getPath() + "]");</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>62</td><td class='count'>8</td>
      <td><pre class='prettyprint covered' id='l62s0'>		try (OutputStream outputStream = new FileOutputStream(path)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>63</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l63s0'>			outputStream.write(this.fileData.getBytes());</pre></td>
    </tr>
    <tr>
      <td class='line'>64</td><td class='count'>4</td>
      <td><pre class='prettyprint jmp'>		<span id='l64s0' title='Executions: 4' class='covered'>} catch (IOException e) {</span></pre></td>
    </tr>
    <tr>
      <td class='line'>65</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l65s0'>			throw new DocumentException(DocumentMessage.ERROR_FAILED_TO_SAVE_FILE, path.getPath(), e);</pre></td>
    </tr>
    <tr>
      <td class='line'>66</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>67</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l67s0'>		return path;</pre></td>
    </tr>
    <tr>
      <td class='line'>68</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr>
      <td class='line'>69</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>}</pre></td>
    </tr>
  </table>
</body>
</html>
